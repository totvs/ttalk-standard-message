{
  "openapi": "3.0.1",
  "servers": [
    {
      "description": "API para Consulta RFB",
      "url": "http://localhost:8081/rfb/consultasEstruturadas/v2"
    }
  ],
  "info": {
    "description": "API para Consulta RFB",
    "version": "2.000",
    "title": "Consulta RFB",
    "contact": {
      "name": "T-Talk",
      "url": "API.Totvs.com.br",
      "email": "comiteintegracao@totvs.com.br"
    },
    "x-totvs": {
      "messageDocumentation": {
        "name": "Consulta RFB",
        "description": "Joinville",
        "segment": "Logística"
      },
      "productInformation": {
        "-sara": {
          "contact": "SUPPLY.ML.LOG.SARA-SIP@totvs.com.br",
          "description": "Consulta RFB - Registro de avarias, perdas, furtos, roubos e outras ocorrências.",
          "adapter": "proc_rfb_1_23.sql",
          "helpUrl": "tdn.totvs.com/pages/viewpage.action?pageId=???"
        }
      }
    }
  },
  "paths": {
    "/registroAvariasPerdasFurtosRoubosOutrasOcorrencias": {
      "get": {
        "tags": [
          "Registro de avarias, perdas, furtos, roubos e outras ocorrências."
        ],
        "summary": "Consulta RFB - Estruturada - Registro de avarias, perdas, furtos, roubos e outras ocorrências.",
        "x-totvs": {
          "productInformation": {
            "-sara": {
              "available": true,
              "note": "Este verbo esta disponivel com todos os parametros exceto expandable.",
              "minimalVersion": "12.1.37"
            }
          }
        },
        "description": "Conforme ADE parágrafo 2.2.3 - Anexo 1.23 - Registro de avarias, perdas, furtos, roubos e outras ocorrências..",
        "operationId": "RestregistroAvariasPerdasFurtosRoubosOutrasOcorrencias.get",
        "parameters": [
          {
            "$ref": "#/components/parameters/Order"
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/PageSize"
          },
          {
            "$ref": "#/components/parameters/NumeroConhecimento"
          },
          {
            "$ref": "#/components/parameters/IdLote"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação realizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistroRegistroAvariasPerdasFurtosRoubosOutrasOcorrencias"
                }
              }
            }
          },
          "400": {
            "description": "Requisição Inválida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorModel"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ]
      }
    },
    "/registroAvariasPerdasFurtosRoubosOutrasOcorrencias/xls": {
      "get": {
        "tags": [
          "Registro de avarias, perdas, furtos, roubos e outras ocorrências criação de planilha"
        ],
        "summary": "Consulta RFB - Estruturada - Registro de avarias, perdas, furtos, roubos e outras ocorrências planilha xls.",
        "description": "Geração de arquivo .xls - Registro de avarias, perdas, furtos, roubos e outras ocorrências.",
        "operationId": "RestRestregistroAvariasPerdasFurtosRoubosOutrasOcorrenciasXls.get",
        "x-totvs": {
          "productInformation": {
            "-sara": {
              "available": true,
              "note": "Este verbo esta disponivel com todos os parametros exceto expandable",
              "minimalVersion": "12.1.37"
            }
          }
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/Order"
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/PageSize"
          },
          {
            "$ref": "#/components/parameters/NumeroConhecimento"
          },
          {
            "$ref": "#/components/parameters/IdLote"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação realizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistroRegistroAvariasPerdasFurtosRoubosOutrasOcorrencias"
                }
              }
            }
          },
          "400": {
            "description": "Requisição Inválida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorModel"
                }
              }
            }
          }
        },
        "security": [
          {
            "api_key": []
          }
        ]
      }
    }
  },
  "components": {
    "parameters": {
      "Order": {
        "name": "order",
        "in": "query",
        "description": "Ordenação da Coleção",
        "required": false,
        "schema": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true
        }
      },
      "Page": {
        "name": "page",
        "in": "query",
        "description": "Paginação da Coleção",
        "required": false,
        "schema": {
          "type": "integer",
          "format": "int32",
          "default": 1,
          "minimum": 1,
          "exclusiveMinimum": false
        }
      },
      "PageSize": {
        "name": "pageSize",
        "in": "query",
        "description": "Quantidade de Itens por Página",
        "required": false,
        "schema": {
          "type": "integer",
          "format": "int32",
          "default": 10
        }
      },
      "NumeroConhecimento": {
        "name": "numeroConhecimento",
        "in": "query",
        "description": "Número do conhecimento de frete",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "IdLote": {
        "name": "idLote",
        "in": "query",
        "description": "Identificador do lote de carga.",
        "required": false,
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "RegistroRegistroAvariasPerdasFurtosRoubosOutrasOcorrencias": {
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Paging"
          },
          {
            "$ref": "#/components/schemas/RegistrosAvariasPerdasFurtosRoubosOutrasOcorrencias"
          }
        ]
      },
      "RegistrosAvariasPerdasFurtosRoubosOutrasOcorrencias": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RegistroAvariasPerdasFurtosRoubosOutrasOcorrencias"
            }
          }
        }
      },
      "RegistroAvariasPerdasFurtosRoubosOutrasOcorrencias": {
        "type": "object",
        "properties": {
          "DataConstatacao": {
            "type": "string",
            "format": "date-time",
            "example": "2017-11-04 11:03:25.000 zzz",
            "description": "Data da Constatação da Avaria",
            "x-totvs": {
              "sara": {
                "Field": "data_constatacao",
                "Required": true,
                "type": "datetime",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "IdLote": {
            "type": "string",
            "example": "17/000003-0",
            "description": "Identificador do lote de carga.",
            "x-totvs": {
              "sara": {
                "Field": "lote_id",
                "Required": true,
                "type": "char",
                "length": 12,
                "avialable": true,
                "canUpdate": false
              }
            }
          },
          "CntId": {
            "type": "string",
            "example": "MSKU3265987",
            "description": "Identificador do Contêiner de Carga",
            "x-totvs": {
              "sara": {
                "Field": "cnt_id",
                "Required": true,
                "type": "char",
                "length": 11,
                "avialable": true,
                "canUpdate": false
              }
            }
          },
          "DescricaoOcorrencia": {
            "type": "string",
            "example": "AVARIA INTERNA",
            "description": "Descrição da Ocorrência",
            "x-totvs": {
              "sara": {
                "Field": "toc_descricao",
                "Required": true,
                "type": "varchar",
                "length": 30,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "DescricaoEfeito": {
            "type": "string",
            "example": "PERDA QUALIDADE COMERCIAL",
            "description": "Descrição do Efeito da Ocorrência",
            "x-totvs": {
              "sara": {
                "Field": "DescricaoEfeito",
                "Required": true,
                "type": "char",
                "length": 50,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "DescricaoEspecie": {
            "type": "string",
            "example": "CAIXA MADEIRA",
            "description": "Descrição da Espécie do Item",
            "x-totvs": {
              "sara": {
                "Field": "esp_descricao",
                "Required": true,
                "type": "varchar",
                "length": 80,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "QuantidadeVolumes": {
            "type": "number",
            "example": "25,00",
            "description": "Quantidade de Volumes",
            "x-totvs": {
              "sara": {
                "Field": "tas_qtd",
                "Required": true,
                "type": "number",
                "format": "float",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "IdentificadorNcm": {
            "type": "integer",
            "example": 7,
            "description": "Identificador Do Cadastro de Ncm",
            "x-totvs": {
              "sara": {
                "Field": "ncm_id",
                "Required": true,
                "type": "integer",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "DescricaoNcm": {
            "type": "string",
            "example": "VEÍCULOS AUTOMÓVEIS PARA TRANSPORTE DE MERCADORIAS",
            "description": "Descrição da Nomenclatura Comum do Mercosul",
            "x-totvs": {
              "sara": {
                "Field": "ncm_descricao",
                "Required": true,
                "type": "varchar",
                "length": "100",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "ItemDescricao": {
            "type": "string",
            "example": "UNIDADE CONDENSADORA PARA CONDICIONADOR DE AR SPLIT INVERTER",
            "description": "Descrição do Item",
            "x-totvs": {
              "sara": {
                "Field": "litem_descricao",
                "Required": false,
                "type": "varchar",
                "length": 255,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "ItemQuantidade": {
            "type": "number",
            "example": "20,0000",
            "description": "Quantidade do Item",
            "x-totvs": {
              "sara": {
                "Field": "oitem_qt",
                "Required": false,
                "type": "number",
                "format": "float",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "DelegaciaOcorrencia": {
            "type": "string",
            "example": "4° DP DE CAMPINAS",
            "description": "Delegacia da Ocorrência",
            "x-totvs": {
              "sara": {
                "Field": "ter_delega",
                "Required": true,
                "type": "char",
                "length": 40,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "BoletimOcorrencia": {
            "type": "string",
            "example": "6564/2018",
            "description": "Boletim de Ocorrência",
            "x-totvs": {
              "sara": {
                "Field": "ter_bo",
                "Required": true,
                "type": "char",
                "length": 15,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "DataBoletimOcorrencia": {
            "type": "string",
            "format": "date-time",
            "example": "2018-08-04 11:03:25.000 zzz",
            "description": "Data do Boletim de ocorrência",
            "x-totvs": {
              "sara": {
                "Field": "ter_dt_bo",
                "Required": true,
                "type": "datetime",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "DataVistoria": {
            "type": "string",
            "format": "date-time",
            "example": "2018-08-04 08:03:25.000 zzz",
            "description": "Data da Vistoria",
            "x-totvs": {
              "sara": {
                "Field": "ter_dt_vistoria",
                "Required": true,
                "type": "datetime",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "NomeAuditor": {
            "type": "string",
            "example": "YURI NIVALDO DA SILVA PULPO",
            "description": "Nome do Auditor Fiscal da Receita Federal",
            "x-totvs": {
              "sara": {
                "Field": "nome_afrf",
                "Required": true,
                "type": "varchar",
                "length": 50,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "MatriculaAuditor": {
            "type": "string",
            "example": "96381460",
            "description": "Matrícula do Auditor Fiscal da Receita Federal",
            "x-totvs": {
              "sara": {
                "Field": "matricula_afrf",
                "Required": true,
                "type": "char",
                "length": "08",
                "available": true,
                "canUpdate": false
              }
            }
          },
          "NumeroProcesso": {
            "type": "string",
            "example": "201800000011",
            "description": "Número do Processo da Vistoria Aduaneira",
            "x-totvs": {
              "sara": {
                "Field": "va_nr_processo",
                "Required": true,
                "type": "char",
                "length": 12,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "NomeConhecimento": {
            "type": "string",
            "example": "AWB",
            "description": "Nome do Conhecimento",
            "x-totvs": {
              "sara": {
                "Field": "conhec_nome",
                "Required": true,
                "type": "varchar",
                "length": 20,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "DocumentoTransporte": {
            "type": "string",
            "example": "2014/565002164",
            "description": "Número do Documento de Transporte",
            "x-totvs": {
              "sara": {
                "Field": "num_doc_transp",
                "Required": true,
                "type": "varchar",
                "length": 36,
                "available": true,
                "canUpdate": false
              }
            }
          },
          "ItemNumero": {
            "type": "integer",
            "example": "3",
            "description": "Código do Item do Lote",
            "x-totvs": {
              "sara": {
                "Field": "litem_numero",
                "Required": true,
                "type": "integer",
                "available": true,
                "canUpdate": false
              }
            }
          }
        }
      },
      "Paging": {
        "type": "object",
        "properties": {
          "hasNext": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "ErrorModel": {
        "type": "object",
        "required": [
          "code",
          "message",
          "detailedMessage"
        ],
        "properties": {
          "code": {
            "type": "string",
            "description": "Código identificador do erro."
          },
          "message": {
            "type": "string",
            "description": "Literal no idioma da requisição descrevendo o erro para o cliente."
          },
          "detailedMessage": {
            "type": "string",
            "description": "Mensagem técnica e mais detalhada do erro."
          },
          "helpUrl": {
            "type": "string",
            "format": "uri",
            "description": "URI para a documentação do erro."
          }
        }
      }
    }
  }
}