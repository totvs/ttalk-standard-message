{
  "$schema": "https://raw.githubusercontent.com/totvs/ttalk-standard-message/Batch/V1/1_000/jsonschema/schemas/Batch_1_000.json#",
  "info": {
    "description": "Contrato de Mensagem Padronizada para os lotes de guias",
    "version": "1.000",
    "title": "Batches",
    "contact": {
      "name": "T-Talk",
      "url": "api.Totvs.com.br",
      "email": "comiteintegracao@totvs.com.br"
    },
    "x-totvs": {
      "messageDocumentation": {
        "name": "Batch",
        "description": "Batch",
        "segment": "HealthCare"
      },
      "productInformation": [
        {
          "product": "hat",
          "contact": "hat@totvs.com.br",
          "description": "Lotes de guias"
        }
      ]
    }
  },
  "definitions": {
    "PagedBatch": {
      "type": "object",
      "allOf": [
        {
          "$ref": "https://raw.githubusercontent.com/totvs/ttalk-standard-message/master/jsonschema/apis/types/totvsApiTypesBase.json#/definitions/Paging"
        },
        {
          "$ref": "#/definitions/Batches"
        }
      ]
    },
    "Batches": {
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Batch"
          }
        }
      }
    },
    "Batch": {
      "description": "",
      "type": "object",
      "properties": {
        "batchCover": {
          "description": "Capa do lote",
          "type": "string",
          "enum": [
            "0",
            "1"
          ],
          "x-totvs": [
            {
              "product": "hat",
              "field": "Não possui cammpo vinculado nesse contexto",
              "required": false,
              "type": "",
              "length": "",
              "note": "0 - Não pode Imprimir a capa do lote / 1 - Pode imprimir a capa do lote",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "status": {
          "description": "Status do lote",
          "type": "string",
          "enum": [
            "0",
            "P",
            "1",
            "2",
            "3",
            "4",
            "5",
            "6",
            "7",
            "8"
          ],
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_STTISS",
              "required": false,
              "type": "string",
              "length": "1",
              "note": "0 - Não Enviado para Operadora / P - Em processamento / 1 - Recebido / 2 - Em Analise / 3 - Liberado para pagamento / 4 - Encerrado sem pagamento / 5 - Analisado e aguardando liberação para o pagamento / 6 - Pagamento efetuado / 7 - Não Localizado / 8 - Aguardando informação complementar ",
              "available": true,
              "canUpdate": true
            }
          ]
        },
        "batchSend": {
          "description": "Envio do lote",
          "type": "string",
          "enum": [
            "0",
            "1"
          ],
          "x-totvs": [
            {
              "product": "hat",
              "field": "Não possui campo vinculado nesse contexto",
              "required": false,
              "type": "",
              "length": "",
              "note": "0 - Não pode enviar o lote para a operadora / 1 - Pode enviar o lote para a operadora",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "batchDate": {
          "description": "Data de geração do lote no formato yyyy-mm-dd",
          "type": "string",
          "format": "date",
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_DTDIGI",
              "required": false,
              "type": "string",
              "length": "8",
              "note": "Data de geração do lote",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "authType": {
          "description": "Tipo de autorização",
          "type": "string",
          "enum": [
            "1",
            "2"
          ],
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_TIPGUI",
              "required": false,
              "type": "string",
              "length": "1",
              "note": "Tipo de autorização",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "batchNumber": {
          "description": "Número do lote no prestador",
          "type": "string",
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_CODPEG",
              "required": false,
              "type": "string",
              "length": "8",
              "note": "Número do lote no prestador",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "healthProviderId": {
          "description": "Código do prestador na operadora",
          "type": "string",
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_CODRDA",
              "required": false,
              "type": "string",
              "length": "6",
              "note": "Código do prestador na operadora",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "rejectionCount": {
          "description": "Quantidade de críticas no lote",
          "type": "number",
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_QTDCRI",
              "required": false,
              "type": "number",
              "length": "8",
              "note": "Críticas de cada guia do lote somadas",
              "available": true,
              "canUpdate": true
            }
          ]
        },
        "authQuantity": {
          "description": "Quantidade de guias no lote",
          "type": "number",
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_QTDDIG",
              "required": false,
              "type": "number",
              "length": "8",
              "note": "Quantidade de guias no lote",
              "available": true,
              "canUpdate": true
            }
          ]
        }
      }
    },
    "BatchBody": {
      "description": "",
      "type": "object",
      "properties": {
        "codeSusep": {
          "description": "Código da operadora na ANS (Agência Nacional de Saúde)",
          "type": "string",
          "example": "349682",
          "x-totvs": [
            {
              "product": "hat",
              "field": "Não possui campo vinculado nesse contexto",
              "required": true,
              "type": "",
              "length": "",
              "note": "Registro ANS",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "healthProviderId": {
          "description": "Código do prestador na operadora",
          "type": "string",
          "example": "000002",
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_CODRDA",
              "required": true,
              "type": "string",
              "length": "6",
              "note": "Código do prestador na operadora",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "authorizations": {
          "description": "Autorizações vinculadas ao lote",
          "type": "array",
          "example": [
            "000120181200000021",
            "000120181200000020"
          ],
          "items": {
            "type": "string"
          },
          "x-totvs": [
            {
              "product": "hat",
              "field": "Não possui campo vinculado nesse contexto",
              "required": true,
              "type": "",
              "length": "",
              "note": "Deve ser enviada pelo menos 1 item",
              "available": true,
              "canUpdate": false
            }
          ]
        },
        "authType": {
          "description": "Tipo de autorização",
          "type": "string",
          "example": "1",
          "enum": [
            "1",
            "2"
          ],
          "x-totvs": [
            {
              "product": "hat",
              "field": "BCI_TIPGUI",
              "required": true,
              "type": "string",
              "length": "1",
              "note": "Tipo de autorização",
              "available": true,
              "canUpdate": false
            }
          ]
        }
      }
    }
  }
}